(function(){function n(){var n=this;this.getRegionList=function(){$.when(n.getRegionList()).done(function(){})};this.saveUserInfo=function(t){$.when(n.model.saveUserInfo(t)).done(function(){})}}function t(){this.saveUserInfo=function(n){return $.post("/trade/SaveUserInfo",n)}}function i(){this.init=function(){$("#header_region").click(function(){$("#region_select").length==0?(PopWindow.Render("加载中","正在加载信息，请稍后"),$.get("/utils/regions",function(n){PopWindow.Destroy();$("#region_tip").remove();$("header").after(n).addClass("region");$("#region_select").height($(window).height()-45);$.each($(".region_index"),function(n,t){var r=$(t).css("height"),i="40px";$(t).css("height",i);$(t).children("dt").click(function(){var n=$(this).parent("dl").hasClass("active"),u;$(".region_index").css("height",i);$(".region_index").removeClass("active");n||(u=$(this).parent("dl").addClass("active"),$(t).css("height",r))})});$("#region_select dd").click(function(){$("#region_select").hide();var n=$(this).text();$.post("/utils/SetRegion",{id:parseInt($(this).attr("value"))},function(t){t.Success?($("#header_region span").text(n),PopWindow.Render("加载中","正在加载信息，请稍后"),location.reload(!0)):alert(t.Message)})})})):($("#region_select").remove(),$("header").removeClass("region"))});$("#region_tip .tip span").click(function(){$("#region_tip").remove();$("#header_region").trigger("click")});$("#region_tip .tip .close").click(function(){$("#region_tip").remove()});$("#type").click(function(n){n.preventDefault();PopWindow.Render("提交中","信息获取中，请稍后");var t=$(this).attr("href");$.post("/trade/SaveUserInfo",{contact:$("#username_input").val(),userMobile:$("#mobile_input").val()},function(n){PopWindow.Destroy();n.Success&&(window.location.href=t)})});$("#submit").click(function(){var n=!0,f=parseInt($("#submit").data("id")),t=$("#username_input").val(),i,u,r;if(isNaN(f)&&(Status="请选择并填写正确的付款及交易方式"),(t.length==0||t.length>50)&&(n="请填写正确的姓名"),i=$("#mobile_input").val(),u=/^1[3456789][0-9]{9}$/,u.test(i)||(n="请填写正确的手机号码"),$("#treaty input").prop("checked")||(n="请阅读并同意爱回收网服务条款"),r="",$("#acode input").val()&&(r=$("#acode input").val()),n!=!0)return alert(n);PopWindow.Render("订单提交中","系统正在为您提交订单，请稍后");$.post("trade/submit",{contact:t,userMobile:i,aCode:r,fastorderkey:$("#submit").data("fok")},function(n){if(PopWindow.Destroy(),n.Success){var t=n.Data.Id;$("#inbaidu").length?clouda.mbaas.account.login({redirect_uri:"http://m.aihuishou.com/trade/success?id="+t}):window.location.href="/trade/success?id="+t}else alert(n.Message),location.href="/cart"},"json")});$("#detail").click(function(n){n.preventDefault();PopWindow.Render("提交中","信息获取中，请稍后");var t=$(this).attr("href");$.post("/trade/SaveUserInfo",{contact:$("#username_input").val(),userMobile:$("#mobile_input").val()},function(n){PopWindow.Destroy();n.Success&&(window.location.href=t)},"json")});$("#treaty .treaty").click(function(){$(".treaty_container").removeClass("hide");$("#body").after('<div id="popwindow_background"><\/div>')});$(".treaty_container .iknow .button").click(function(){$(".treaty_container").addClass("hide");$("#popwindow_background").remove()});$("#acode .check_acode").click(function(){var n=$("#acode input").val();if(n.length>5)PopWindow.Render("提交中","请稍后"),$.post("/trade/CheckACode",{acode:n,fastorderkey:$("#acode .check_acode").data("fok")},function(n){if(PopWindow.Destroy(),n.Success){if($("#acode input").prop("disabled",!0),$("#acode .check_acode").addClass("disable"),n.Gift&&$("#acodepromotion .price").text(n.Gift),n.Plus){$("#acodepromotion .price span").text(n.Plus);var t=0;$("#summary_info .product .price, #storepromotion .price, #acodepromotion .price, #baidupromotion .price").children("span").each(function(n,i){var r=parseInt($(i).text());r&&(t+=r)});$("#summary .price span").text(t)}$("#acodepromotion").show()}else return n.Price?alert("订单总金额（不包括其他补贴）需要满足{0}元才能使用此优惠码".format(n.Price)):alert("优惠码无效")},"json");else return alert("优惠码无效")})}}MVC(t,i,n)})();
//# sourceMappingURL=index.min.js.map
