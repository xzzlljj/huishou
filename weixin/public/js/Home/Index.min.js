jQuery(function(a){a("#topbanner").slidershow();a("#categories-brands").popup();a("#body").popup({navWrapSelector:"div.sale"});if(a("#inbaidu").length){a(".brands-wrap").css("height",a(window).height()-45+"px")}a(".search-submit").click(function(){window.location.href="/product?keyword="+a(".search input").val()});a(".search input").keydown(function(c){if(c.which==13){window.location.href="/product?keyword="+a(this).val()}});a.autocomplete(a(".search input")[0],{url:"/product/getproducttip",matchCase:false,matchContains:true,enterPressCallBack:function(){a(".search-submit").trigger("click")},cacheLength:100,width:a(window).width()*0.9-2});var b=location.hash.slice(1);a("#categories-brands").find("ul.categories > li").each(function(c,d){if(b==a(d).data("cate")){a(d).trigger("click")}})});(function(a){a.fn.slidershow=function(m){var p=this,n=a.extend({},a.fn.slidershow.defaults,m),c=this.find(n.contentSelector),d=c.find(n.contentItemSelector),l=this.find(n.navWrapSelector),k=l.find(n.navItemSelector),j=k.length,t=a(window),u=t.width(),g=0,i=0,q=0,e=0,r=0,f=0,h=false,s;function o(w,v){c.css({"transition-duration":v+"ms",transform:"translateX("+w+"px)"})}function b(){g++;o(-g*u,n.scrollTime);if(g>j){g=1;setTimeout(function(){o(-u,0)},n.scrollTime)}else{if(g<=0){g=j;setTimeout(function(){o(-j*u,0)},n.scrollTime)}}k.eq(i-1).removeClass(n.currentClass).end().eq(g-1).addClass(n.currentClass);i=g;s=setTimeout(b,n.intervalTime)}d.width(u);if(j===1){l.hide();return this}d.eq(0).clone().appendTo(c);d.eq(j-1).clone().prependTo(c);b();this.on("touchstart touchmove touchend",n.contentItemSelector,function(v){if(v.type==="touchmove"){e=v.originalEvent.touches[0].pageX;f=v.originalEvent.touches[0].pageY;if(Math.abs(e-q)-Math.abs(f-r)>0){v.preventDefault();h=true;o(-i*u+e-q,0)}}else{if(v.type==="touchstart"){q=v.originalEvent.touches[0].pageX;r=v.originalEvent.touches[0].pageY;h=false;clearTimeout(s)}else{if(v.type==="touchend"){if(h||Math.abs(e-q)-Math.abs(f-r)>0){if(e-q>0){g-=2}b()}}}}});l.on("click",n.navItemSelector,function(v){g=a(this).index();clearTimeout(s);b()});t.on("resize",function(){setTimeout(function(){u=wind.width();d.width(u)},200)});return this};a.fn.slidershow.defaults={scrollTime:1000,intervalTime:20000,contentSelector:"div.slidershow-content",contentItemSelector:"a.slidershow-item",navWrapSelector:"ul.slidershow-nav",navItemSelector:"li",currentClass:"current"};a.fn.popup=function(l){var m=a.extend({},a.fn.popup.defaults,l),b=a("body"),c=b.css("position"),e=b.css("top"),d=0,h=this.find(m.contentWrapSelector),g=h.find(m.contentsSelector),f=g.find(m.contentItemSelector),j=f.length,k=this.find(m.navWrapSelector),i=f.eq(0),n=0;k.on("click",m.navItemSelector,function(p){n=new Date;var o=a(this).data("cate");if(o){for(var q=j-1;q>=0;q--){if(f.eq(q).data("cate")===o){i=f.eq(q);break}}d=b.scrollTop();h.show();i.show();g.addClass(m.contentItemCurrentClass);b.css({position:"fixed",top:-d})}});h.on("click",function(o){g.removeClass(m.contentItemCurrentClass);setTimeout(function(){h.hide();i.hide();b.css({position:c,top:e}).scrollTop(d)},m.transitionTime)});return this};a.fn.popup.defaults={transitionTime:300,contentWrapSelector:"div.brands-wrap",contentsSelector:"div.brands",contentItemSelector:".item",contentItemCurrentClass:"show",navWrapSelector:"ul.categories",navItemSelector:"li"}})(jQuery);