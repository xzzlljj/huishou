jQuery(function(n){function d(){s=g.innerWidth()-p.innerWidth();r=s-t.innerWidth();f=parseFloat(t.css("left"));t.children().each(function(t,u){i=s/2-(n(u).innerWidth()/2+n(u).position().left);h[t]=i>f?f:i<r?r:i})}var c=n("body"),a=c.css("position"),e=n("#js-shop-city-current"),nt=e.data("id"),o=n("#js-shop-city-list-wrap"),l=!1;e.on("click",function(){l=l?!1:!0;e.toggleClass("active");o.toggleClass("show");c.css("position",l?"fixed":a)});o.on("click",function(t){e.removeClass("active");o.removeClass("show");c.css("position",a);n(t.target).closest("li",o.selector).hasClass("active")&&t.preventDefault()});var u=n("#js-region-nav"),v=u.find(".item"),y=v[0],g=u.find(".region-nav-list-wrap"),t=u.find("ul.region-nav-list"),p=u.find(".next"),w=n("#js-shop-address-list-wrap").children(),s,h=[],r,f,i,b,k;t.on("touchstart touchmove touchend",function(n){n.type==="touchstart"?(i=parseFloat(t.css("left")),b=n.originalEvent.touches[0].pageX,t.css("transition-duration","0ms")):n.type==="touchmove"?(k=n.originalEvent.touches[0].pageX,t.css("left",i+k-b)):n.type==="touchend"&&(i=parseFloat(t.css("left")),i>f?t.css({left:f,"transition-duration":"300ms"}):i<r&&t.css({left:r,"transition-duration":"300ms"}))});d();u.on("click",".item",function(){if(y!==this){var i=n(this),r=i.data("id");v.removeClass("current");i.addClass("current");r===undefined?w.show():w.each(function(u,f){n(f).data("regionId")===r?n(f).show():n(f).hide();t.css({left:h[i.index()],"transition-duration":"300ms"})});y=this}});p.on("click",function(){t.css({left:Math.max(r,parseFloat(t.css("left"))-s),"transition-duration":"300ms"})});n(window).on("resize",function(){setTimeout(d,300)});navigator.geolocation&&navigator.geolocation.getCurrentPosition&&navigator.geolocation.getCurrentPosition(function(t){function s(n,t){return Math.sqrt(Math.pow(n-e,2)+Math.pow(t-o,2))}var i=n("#js-shop-address-list-wrap"),f=i.children(),e=t.coords.latitude,o=t.coords.longitude,r=Number.MAX_VALUE,u;f.each(function(t,i){var f=s(n(i).data("latitude"),n(i).data("longitude"));f<r&&(r=f,u=i)});i.prepend(n(u).find("strong").after("<span>（离您最近）<\/span>").end())})});
//# sourceMappingURL=index.min.js.map
