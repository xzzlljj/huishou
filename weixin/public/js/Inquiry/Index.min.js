jQuery(function(n){n("#js-way-explain").tab()}),function(n){n.fn.tab=function(t){for(var i=n.extend({},n.fn.tab.defaults,t),e=this.find(i.menuSelector),f=e.find(i.menuItemSelector),o=this.find(i.contentItemSelector),r=-1,u=f.length-1;u>=0;u--)if(f.eq(u).hasClass(i.menuCurrentClass)){r=u;break}e.on(i.eventType,i.menuItemSelector,function(){var t=n(this),u=t.index();f.eq(r).removeClass(i.menuCurrentClass);t.addClass(i.menuCurrentClass);o.eq(r).removeClass(i.contnetCurrentClass).end().eq(u).addClass(i.contnetCurrentClass);r=u});return this};n.fn.tab.defaults={eventType:"touchend",menuSelector:"ul.way-explain-nav",menuItemSelector:"li",menuCurrentClass:"current",contentItemSelector:"ul.way-explain-content > li",contnetCurrentClass:"current"}}(jQuery),function(){function n(){var n=this;this.getLastestShares=function(t){$.when(n.model.getLastestShares(t)).done(function(t){t.Success&&n.view.renderShare(t.Data[0],t.Count)})};this.addToCart=function(t){$.when(n.model.addToCart(t)).done(function(t){t.Success&&n.view.renderAddToCartSuccess()})}}function t(){this.getLastestShares=function(n){return $.post("/share/getlastest",n)};this.addToCart=function(n){return $.post("/cart/add",n)}}function i(){var n=this;this.init=function(){$("#didi_pop").fancybox({fitToView:!1,width:320,height:480,autoSize:!1,closeClick:!1,openEffect:"none",closeEffect:"none",margin:0,afterClose:function(){ga("send","event","button","click","close_didiquan")}});$("#didi_pop").on("click",function(){ga("send","event","button","click","get_didiquan")});n.controller.getLastestShares({pageIndex:0,pageSize:1});$(".added_to_cart").click(function(){$(this).fadeOut(500)});$(".add-cart").click(function(){n.controller.addToCart({key:$(this).data("key")});ga("send","event","button","click","m_add_cart")});$("#cart_background").click(function(){$("#cart_background, #cart_window").hide()})};this.renderShare=function(n,t){var r="http://tp2.sinaimg.cn/"+/(\d+)/.exec(n.Link)[1]+"/180/520315/1",i=n.ShareDt.ConvertJSONDateToJSDateObject();$(".evaluation ul").append('<li class="item"><article><header><img src="{0}"><span>{1}<\/span><time>{2}.{3}.{4}<\/time><\/header><p>{5}<\/p><\/article><\/li>'.format(r,n.Name,i.getFullYear(),i.getMonth()+1,i.getDate(),n.Content));$(".evaluation>a>b").text(t)};this.renderAddToCartSuccess=function(){$("#cart_background, #cart_window").show()}}MVC(t,i,n)}();
//# sourceMappingURL=index.min.js.map
