(function(){function n(){var n=this;this.searchProducts=function(t){$.when(n.model.searchProducts(t)).done(function(t){return t.Success&&t.Data.length?n.view.renderProducts(t.Data):n.view.renderNoMoreProducts()})}}function t(){this.searchProducts=function(n){return $.get("../../relate/swiper_slide.php",n)}}function i(){var n=this;this.pageSize=50;this.init=function(){var t=$("#result").data("antutu"),i;$("#input_container input").keydown(function(n){n.which==13&&(window.location.href="../../../relate/product_keyword.php"+$("#search_input").val()+(t?"&cid=1":""))});$("#input_container .right").click(function(){window.location.href="../../../relate/product_keyword.php"+$("#search_input").val()+(t?"&cid=1":"")});$("#input_container input").blur(function(){$("#input_container").removeClass("active")});$("#input_container").click(function(){$(this).addClass("active")});$("#input_container .clear").click(function(){$("#search_input").val("")});$(window).scroll(n.lazyLoad).trigger("scroll");i={};t&&(i={cids:[1]});$.autocomplete($("#search_input")[0],{url:"/product/getproducttip",matchCase:!1,matchContains:!0,extraParams:i,cacheLength:100,width:$(window).width()*.7})};this.lazyLoad=function(){if($(window).scrollTop()+$(window).height()>$("body").height()-100){var t=Math.ceil(($(".product").length-1)/n.pageSize)+1,i=$("#result").data("cid"),r=$("#result").data("bid"),u=$("#result").data("keyword");$(window).unbind("scroll",n.lazyLoad);$("#result").append('<div id="loading">加载中...<\/div>');n.controller.searchProducts({PageIndex:t,Keyword:u,Cid:i,Bid:r})}};this.renderProducts=function(t){$("#loading").remove();t.length>=n.pageSize&&$(window).scroll(n.lazyLoad);for(var i=0;i<t.length;i++)$("#result").append('<a class="product" href="../../../Home/PageNotFound.php">{1}<\/a>'.format(t[i].Id,t[i].Name))};this.renderNoMoreProducts=function(){if($("#loading").remove(),$(".product").length)$("#nomore").show();else{var n=$("#result").data("keyword");$("#noresult .tip").text(n?'未能搜索到和"{0}"相关的机型'.format(n):"未能搜索到相关机型");$("#noresult, #tips").show()}}}MVC(t,i,n)})();
//# sourceMappingURL=index.min.js.map
